{"version":3,"sources":["components/StringsNote.js","components/Frequencies.android.js","components/Frequencies.js","helpers/autoCorrelate.js","helpers/helper.js","App.js"],"names":["StringsNote","props","Pressable","style","styles","container","onTouchStart","createNote","Text","noteText","color","noteColor","note","View","textContainer","text","StyleSheet","create","textAlign","display","justifyContent","alignItems","backgroundColor","width","height","maxWidth","fontSize","marginBottom","marginTop","frets","require","Notes","useState","showAnswer","setShowAnswer","useEffect","Platform","OS","document","addEventListener","e","code","createString","removeEventListener","content","handlePress","useCallback","a","async","Linking","canOpenURL","openURL","Alert","alert","Button","title","onPress","string","toPlay","stringColor","button","buttonText","flex","paddingTop","fontWeight","textDecorationLine","answer","borderRadius","padding","audioCtx","AudioContext","analyserNode","createAnalyser","buf","Float32Array","noteStrings","noteColors","Frequencies","source","setSource","started","setStart","pitchNote","setPitchNote","setPitchScale","pitch","setPitch","next","setNext","connect","setInterval","time","getFloatTimeDomainData","ac","sampleRate","SIZE","length","rms","i","val","Math","sqrt","r1","r2","abs","slice","c","Array","fill","j","d","maxval","maxpos","T0","x1","x2","x3","autoCorrelate","frequency","noteNum","log","round","noteFromPitch","sym","scl","floor","parseFloat","toFixed","getMicInput","navigator","mediaDevices","getUserMedia","audio","echoCancellation","autoGainControl","noiseSuppression","latency","disconnect","input","state","resume","createMediaStreamSource","overflow","Stack","createNativeStackNavigator","App","setNote","setString","setNoteColor","setStringColor","random","toString","Screen","name","options","navigation","headerRight","navigate","NavigationContainer","Navigator","screenOptions","headerStyle","headerTintColor","headerTitleAlign","headerTitleStyle","headerLeft"],"mappings":"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","file":"static/js/app.e644268d.chunk.js","sourcesContent":["import React from 'react'\nimport { View, Text, StyleSheet, Pressable } from 'react-native'\n\nexport default function StringsNote(props) {\n    return (\n        <Pressable style={styles.container} onTouchStart={() => props.createNote()}>\n            <Text style={styles.noteText}>Note: <Text style={{color: props.noteColor}}>{props.note}</Text></Text>\n            <View style={styles.textContainer}>\n                <Text style={styles.text}>*Play the note on all of the strings</Text>\n                <Text style={styles.text}>*Tap anywhere on the screen or tap the spacebar to generate a new note*</Text>\n            </View>\n        </Pressable>\n    )\n}\n\nconst styles = StyleSheet.create({ // {color: '#fff', fontWeight: 'bold'}{color: '#fff', marginTop: 10}\n    container: {\n        textAlign: 'center',\n        display: 'flex',\n        justifyContent: 'center',\n        alignItems: 'center',\n        backgroundColor: '#292B36',\n        width: '100%',\n        height: '100%'\n    }, \n    textContainer: {\n        color: '#fff',\n        maxWidth: '75%'\n    },\n    noteText: {\n        fontSize: 50,\n        color: 'white',\n        marginBottom: 18\n    },\n    text: {\n        color: '#fff',\n        marginTop: 10,\n    }\n    \n})\n","import React, { useState, useEffect, useCallback } from 'react'\nimport { View, Text, StyleSheet, Pressable, Button, Platform, Linking } from 'react-native'\nconst frets = require('./frets.json')\n\nexport default function Notes(props) {\n    const [showAnswer, setShowAnswer] = useState(false) // If the user is holding the show answer text set to true\n\n    useEffect(() => { // Adds listener for web users, also calls the initial createNote and createString\n        if (Platform.OS === 'web') {\n          document.addEventListener('keypress', (e) => {\n            if (e.code === 'Space') {\n              setShowAnswer(false)\n              props.createNote()\n              props.createString()\n            }\n          })\n        }\n        props.createNote()\n        props.createString()\n    \n        return () => {\n          if (Platform.OS === 'web') {\n            document.removeEventListener('keypress')\n          }\n        }\n    }, [])\n\n    let playThis = () => { // Calls the functions needed to change the note and string\n        setShowAnswer(false)\n        props.createNote()\n        props.createString()\n    }\n\n    const handlePress = useCallback(async () => { // Handles the creation of the link that is in the app\n        const supported = await Linking.canOpenURL(\"https://brandon205.github.io/guitario/\");\n    \n        if (supported) { // Open the link with what makes sense depending on the type of link\n            await Linking.openURL(\"https://brandon205.github.io/guitario/\");\n        } else {\n        Alert.alert(`Don't know how to open this URL: https://brandon205.github.io/guitario/`);\n        }\n    });\n\n    let content; // Dynamically display a link to the main site if mobile users want to go there\n    if (Platform.OS !== 'web') {\n        content = (\n            <Button title=\"Go To the Full Site\" onPress={() => handlePress()} />\n        )\n    } else {\n        content = <></>\n    }\n\n    return (\n        <View style={styles.container}>\n            <Text style={styles.title}>To Play</Text>\n            <Text style={{display: showAnswer ? 'flex' : 'none', color: 'white', fontSize: 30}}>Correct fret: {frets[props.string][props.note]}</Text>\n            <Pressable style={styles.toPlay} onPress={() => playThis()}>\n                <Text style={styles.noteText}>String: <Text style={{color: props.stringColor}}>{props.string}</Text></Text>\n                <Text style={styles.noteText}>Note: <Text style={{color: props.noteColor}}>{props.note}</Text></Text>\n            </Pressable>\n\n            <Text style={styles.text}>*Tap above or tap the spacebar to generate a new note to play*</Text>\n            <Pressable onPress={() => setShowAnswer(!showAnswer)}>\n                <View style={styles.button}>\n                    <Text style={styles.buttonText}>Stuck?</Text>\n                </View>\n            </Pressable>\n            {content}\n        </View>\n    )\n}\n\nconst styles = StyleSheet.create({\n    container: {\n        textAlign: 'center',\n        display: 'flex',\n        flex: 1,\n        alignItems: 'center',\n        backgroundColor: '#292B36',\n    },\n    noteText: {\n        fontSize: 50,\n        color: 'white',\n        paddingTop: 20\n    },\n    text: {\n        color: '#fff',\n        marginTop: 15,\n        maxWidth: '75%'\n    },\n    title: {\n        fontSize: 40,\n        fontWeight: 'bold',\n        color: 'white',\n        textDecorationLine: 'underline',\n        marginTop: 35\n    },\n    answer: {\n        fontSize: 12,\n        marginTop: 15,\n        color: 'white',\n        fontWeight: 'bold'\n    },\n    toPlay: {\n        display: 'flex',\n        alignItems: 'center'\n    },\n    button: {\n        display: 'flex',\n        justifyContent: 'center',\n        alignItems: 'center',\n        marginTop: 20,\n        marginBottom: 50,\n        backgroundColor: '#2196F3',\n        borderRadius: 20,\n    },\n    buttonText: {\n        color: 'white',\n        padding: 10,\n        fontSize: 20\n    }\n})\n","import React, { useState, useEffect } from 'react';\nimport { View, Text, Pressable, StyleSheet } from 'react-native';\nimport Notes from './Frequencies.android.js';\nimport { noteFromPitch } from \"../helpers/helper.js\";\nimport autoCorrelate from \"../helpers/autoCorrelate.js\";\n\nconst audioCtx = new AudioContext();\nconst analyserNode = audioCtx.createAnalyser();\nconst buflen = 2048;\nvar buf = new Float32Array(buflen);\n\nconst noteStrings = [\n  \"C\",\n  \"C#\",\n  \"D\",\n  \"D#\",\n  \"E\",\n  \"F\",\n  \"F#\",\n  \"G\",\n  \"G#\",\n  \"A\",\n  \"A#\",\n  \"B\",\n];\n\nconst noteColors = {\n  \"C\": \"#22ff00\",\n  \"C#\": \"#00ff38\",\n  \"D\": \"#007cff\",\n  \"D#\": \"#0500ff\",\n  \"E\": \"#4500ea\",\n  \"F\": \"#57009e\",\n  \"F#\": \"#55004f\",\n  \"G\": \"#b30000\",\n  \"G#\": \"#ee0000\",\n  \"A\": \"#ff6300\",\n  \"A#\": \"#ffec00\",\n  \"B\": \"#99ff00\",\n}\n\nexport default function Frequencies(props) {\n  const [source, setSource] = useState(null);\n  const [started, setStart] = useState(false);\n  const [pitchNote, setPitchNote] = useState(\"N/A\");\n  const [pitchScale, setPitchScale] = useState(\"4\");\n  const [pitch, setPitch] = useState(\"0\");\n  const [next, setNext] = useState(false) // For knowing if next note function has been run yet or not\n\n  const updatePitch = (time) => {\n    analyserNode.getFloatTimeDomainData(buf);\n    var ac = autoCorrelate(buf, audioCtx.sampleRate);\n    if (ac > -1) {\n      let note = noteFromPitch(ac);\n      let sym = noteStrings[note % 12];\n      let scl = Math.floor(note / 12) - 1;\n      // let dtune = centsOffFromPitch(ac, note);\n      setPitch(parseFloat(ac).toFixed(2) + \" Hz\");\n      setPitchNote(sym);\n      setPitchScale(scl);\n      // setDetune(dtune);\n      // setNotification(false);\n      // console.log(note, sym, scl, dtune, ac);\n    }\n  };\n\n  useEffect(() => { // When the source changes update it in the app\n    if (source != null) {\n      source.connect(analyserNode);\n    }\n  }, [source]);\n\n  useEffect(() => { // Using the useEffect so that the state can be updated in App without causing an error\n    if (next) {\n      props.createNote()\n      props.createString()\n    }\n  }, [next]);\n\n  useEffect(() => { // Once the note is updated we need to change our \"toggle\" back otherwise we would update the note like 5 times in a second\n    if (next) {\n      setNext(false)\n    }\n  }, [props.note]);\n\n  setInterval(updatePitch, 1);\n\n  const start = async () => {\n    const input = await getMicInput();\n\n    if (audioCtx.state === \"suspended\") {\n      await audioCtx.resume();\n    }\n    setStart(true);\n    // setNotification(true);\n    // setTimeout(() => setNotification(false), 5000);\n    setSource(audioCtx.createMediaStreamSource(input));\n  };\n\n  const stop = () => {\n    source.disconnect(analyserNode);\n    setStart(false);\n  };\n  \n  const getMicInput = () => {\n    return navigator.mediaDevices.getUserMedia({\n      audio: {\n        echoCancellation: true,\n        autoGainControl: false,\n        noiseSuppression: false,\n        latency: 0,\n      },\n    });\n  };\n\n  if (pitchNote === props.note) { // Checks if the user is playing the Current Note\n    if (!next) { // If the note isn't already being changed then say it is and the UseEffect above will change it\n      setNext(true)\n    }\n  }\n\n  let content; // For dynamically rendering the Start or Stop button\n  if (started) {\n    content = (\n      <Pressable onPress={stop}>\n        <View style={styles.button}>\n          <Text style={styles.buttonText}>Stop</Text>\n        </View>\n      </Pressable>\n    )\n  } else {\n    content = (\n      <Pressable onPress={start}>\n        <View style={styles.button}>\n          <Text style={styles.buttonText}>Start</Text>\n        </View>\n      </Pressable>\n    )\n  }\n\n  return (\n    <View style={styles.container}>\n      <Notes createNote={() => props.createNote()} createString={() => props.createString()} string={props.string} note={props.note} noteColor={props.noteColor} stringColor={props.stringColor}/>\n      <Text style={styles.title}>Currently Playing</Text>\n      <Text style={{color: noteColors[pitchNote], fontSize: 30, fontWeight: 'bold', marginTop: 12}}>{pitchNote}</Text>\n      <Text style={{color: noteColors[pitchNote], fontSize: 30, fontWeight: 'bold', marginTop: 12}}>{pitch}hz</Text>\n      {content}\n    </View>\n  )\n}\n\nconst styles = StyleSheet.create({\n  container: {\n    display: 'flex',\n    alignItems: 'center',\n    backgroundColor: '#292B36',\n    overflow: 'visible'\n  },\n  title: {\n    fontSize: 40,\n    fontWeight: 'bold',\n    color: 'white',\n    textDecorationLine: 'underline',\n    marginTop: 55,\n    marginBottom: 15\n  },\n  button: {\n    display: 'flex',\n    justifyContent: 'center',\n    alignItems: 'center',\n    marginTop: 20,\n    backgroundColor: '#2196F3',\n    borderRadius: 20,\n    marginBottom: 70\n    },\n  buttonText: {\n    color: 'white',\n    padding: 10,\n    fontSize: 20\n  }\n});\n","export default function autoCorrelate(buf, sampleRate) {\n    var SIZE = buf.length;\n    var rms = 0;\n  \n    for (let i = 0; i < SIZE; i++) {\n      var val = buf[i];\n      rms += val * val;\n    }\n    rms = Math.sqrt(rms / SIZE);\n    if (rms < 0.01)\n      // not enough signal\n      return -1;\n  \n    var r1 = 0,\n      r2 = SIZE - 1,\n      thres = 0.2;\n    for (let i = 0; i < SIZE / 2; i++)\n      if (Math.abs(buf[i]) < thres) {\n        r1 = i;\n        break;\n      }\n    for (let i = 1; i < SIZE / 2; i++)\n      if (Math.abs(buf[SIZE - i]) < thres) {\n        r2 = SIZE - i;\n        break;\n      }\n  \n    buf = buf.slice(r1, r2);\n    SIZE = buf.length;\n  \n    var c = new Array(SIZE).fill(0);\n    for (let i = 0; i < SIZE; i++)\n      for (var j = 0; j < SIZE - i; j++) c[i] = c[i] + buf[j] * buf[j + i];\n  \n    var d = 0;\n    while (c[d] > c[d + 1]) d++;\n    var maxval = -1,\n      maxpos = -1;\n    for (let i = d; i < SIZE; i++) {\n      if (c[i] > maxval) {\n        maxval = c[i];\n        maxpos = i;\n      }\n    }\n    var T0 = maxpos;\n  \n    var x1 = c[T0 - 1],\n      x2 = c[T0],\n      x3 = c[T0 + 1];\n    var a = (x1 + x3 - 2 * x2) / 2;\n    var b = (x3 - x1) / 2;\n    if (a) T0 = T0 - b / (2 * a);\n  \n    return sampleRate / T0;\n  };","const noteFromPitch = (frequency) => {\n    var noteNum = 12 * (Math.log(frequency / 440) / Math.log(2));\n    return Math.round(noteNum) + 69;\n  };\n  \n  const frequencyFromNoteNumber = (note) => {\n    return 440 * Math.pow(2, (note - 69) / 12);\n  };\n  \n  const centsOffFromPitch = (frequency, note) => {\n    return Math.floor(\n      (1200 * Math.log(frequency / frequencyFromNoteNumber(note))) / Math.log(2)\n    );\n  };\n  \n//   const getDetunePercent = (detune) => {\n//     if (detune > 0) {\n//       return 50 + detune;\n//     } else {\n//       return 50 + -detune;\n//     }\n//   };\n  \n  export { noteFromPitch, centsOffFromPitch };","import React, { useState } from 'react';\nimport { Button, Platform } from 'react-native';\nimport { NavigationContainer } from '@react-navigation/native';\nimport { createNativeStackNavigator } from '@react-navigation/native-stack';\nimport StringsNote from './components/StringsNote';\nimport Frequencies from './components/Frequencies'; // Will pull either the .android.js or just the .js one based on platform\n\nconst Stack = createNativeStackNavigator();\n\nexport default function App() {\n  const [note, setNote] = useState(\"0\");\n  const [string, setString] = useState(\"E (6th)\");\n  const [noteColor, setNoteColor] = useState(\"#33CC33\");\n  const [stringColor, setStringColor] = useState(\"#D07173\");\n\n  let createNote = () => { // Generates a random note and its color and puts both into state\n    let tempNote = (Math.floor(Math.random() * 7)).toString()\n\n    switch (tempNote) {\n      case \"0\":\n        setNote(\"A\")\n        setNoteColor('#ff6300')\n        break;\n      case \"1\":\n        setNote(\"B\")\n        setNoteColor('#99ff00')\n        break;\n      case \"2\":\n        setNote(\"C\")\n        setNoteColor('#28ff00')\n        break;\n      case \"3\":\n        setNote(\"D\")\n        setNoteColor('#007cff')\n        break;\n      case \"4\":\n        setNote(\"E\")\n        setNoteColor('#4500ea')\n        break;\n      case \"5\":\n        setNote(\"F\")\n        setNoteColor('#57009e')\n        break;\n      case \"6\":\n        setNote(\"G\")\n        setNoteColor('#b30000')\n        break;\n      default:\n        setNote(\"Uh oh, this should be a note... Try again\")\n    }\n  }\n\n  let createString = () => { // Generates a random string and its color and puts both into state\n    let tempString = (Math.floor(Math.random() * 6)).toString()\n\n    switch (tempString) {\n      case \"0\":\n        setString(\"E (6th)\")\n        setStringColor('#4500ea')\n        break;\n      case \"1\":\n        setString(\"A (5th)\")\n        setStringColor('#ff6300')\n        break;\n      case \"2\":\n        setString(\"D (4th)\")\n        setStringColor('#007cff')\n        break;\n      case \"3\":\n        setString(\"G (3rd)\")\n        setStringColor('#b30000')\n        break;\n      case \"4\":\n        setString(\"B (2nd)\")\n        setStringColor('#99ff00')\n        break;\n      case \"5\":\n        setString(\"e (1st)\")\n        setStringColor('#4500ea')\n        break;\n      default:\n        setString(\"Uh oh, this should be a string... Try again\")\n    }\n  }\n\n  let content;\n  if (Platform.OS === 'web') {\n    content = (\n      <Stack.Screen name=\"Guitario\" options={({ navigation }) => ({\n        headerRight: () => (<Button title=\"Notes >\" onPress={() => navigation.navigate('Notes')} />)\n      })}>\n        { props => <Frequencies {...props} createNote={() => createNote()} createString={() => createString()} string={string} note={note} noteColor={noteColor} stringColor={stringColor} /> }\n      </Stack.Screen>\n    )\n  } else {\n    content = (\n      <Stack.Screen name=\"Guitario\" options={({ navigation }) => ({\n        headerRight: () => (<Button title=\"Notes >\" onPress={() => navigation.navigate('Notes')} />)\n      })}>\n        { props => <Frequencies {...props} createNote={() => createNote()} createString={() => createString()} string={string} note={note} noteColor={noteColor} stringColor={stringColor} /> }\n      </Stack.Screen>\n    )\n  }\n\n  return (\n    <NavigationContainer>\n      <Stack.Navigator screenOptions={{headerStyle: {backgroundColor: '#19191B'}, headerTintColor: '#fff', headerTitleAlign: 'center', headerTitleStyle: {fontSize: 24, fontWeight: 'bold'}}}>\n        {content}\n        <Stack.Screen name=\"Notes\" options={({ navigation }) => ({\n          headerLeft: () => (<Button title=\"< Guitario\" onPress={() => navigation.navigate('Guitario')} />)\n        })}>\n          { props => <StringsNote {...props} createNote={() => createNote()} note={note} noteColor={noteColor} /> }\n        </Stack.Screen>\n      </Stack.Navigator>\n    </NavigationContainer>\n  );\n}\n"],"sourceRoot":""}