{"version":3,"sources":["components/StringsNote.js","components/Frequencies.android.js","components/Frequencies.js","helpers/autoCorrelate.js","helpers/helper.js","App.js"],"names":["StringsNote","props","Pressable","style","styles","container","onTouchStart","createNote","Text","noteText","color","noteColor","note","View","textContainer","text","StyleSheet","create","textAlign","display","justifyContent","alignItems","backgroundColor","width","height","maxWidth","fontSize","marginBottom","marginTop","frets","require","Notes","useState","showAnswer","setShowAnswer","useEffect","Platform","OS","document","addEventListener","e","code","createString","removeEventListener","title","string","toPlay","onPress","stringColor","button","buttonText","padding","paddingTop","fontWeight","textDecorationLine","answer","borderRadius","audioCtx","AudioContext","analyserNode","createAnalyser","buf","Float32Array","noteStrings","Frequencies","source","setSource","started","setStart","pitchNote","setPitchNote","setPitchScale","pitch","setPitch","next","setNext","connect","setInterval","time","getFloatTimeDomainData","ac","sampleRate","SIZE","length","rms","i","val","Math","sqrt","r1","r2","abs","slice","c","Array","fill","j","d","maxval","maxpos","T0","x1","x2","x3","a","autoCorrelate","frequency","noteNum","log","round","noteFromPitch","sym","scl","floor","parseFloat","toFixed","content","getMicInput","navigator","mediaDevices","getUserMedia","audio","echoCancellation","autoGainControl","noiseSuppression","latency","Button","disconnect","async","input","state","resume","createMediaStreamSource","pitchText","Stack","createNativeStackNavigator","App","setNote","setString","setNoteColor","setStringColor","random","toString","Screen","name","options","navigation","headerRight","navigate","NavigationContainer","Navigator","screenOptions","headerStyle","headerTintColor","headerTitleAlign","headerTitleStyle","headerLeft"],"mappings":"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","file":"static/js/app.0936bc4b.chunk.js","sourcesContent":["import React from 'react'\nimport { View, Text, StyleSheet, Pressable } from 'react-native'\n\nexport default function StringsNote(props) {\n    return (\n        <Pressable style={styles.container} onTouchStart={() => props.createNote()}>\n            <Text style={styles.noteText}>Note: <Text style={{color: props.noteColor}}>{props.note}</Text></Text>\n            <View style={styles.textContainer}>\n                <Text style={styles.text}>*Play the above note on all of the strings</Text>\n                <Text style={styles.text}>*Tap anywhere on the screen or tap the spacebar to generate a new note*</Text>\n            </View>\n        </Pressable>\n    )\n}\n\nconst styles = StyleSheet.create({ // {color: '#fff', fontWeight: 'bold'}{color: '#fff', marginTop: 10}\n    container: {\n        textAlign: 'center',\n        display: 'flex',\n        justifyContent: 'center',\n        alignItems: 'center',\n        backgroundColor: '#292B36',\n        width: '100%',\n        height: '100%'\n    }, \n    textContainer: {\n        color: '#fff',\n        maxWidth: '75%'\n    },\n    noteText: {\n        fontSize: 50,\n        color: 'white',\n        marginBottom: 18\n    },\n    text: {\n        color: '#fff',\n        marginTop: 10,\n    }\n    \n})\n","import React, { useState, useEffect } from 'react'\nimport { View, Text, StyleSheet, Pressable, Platform } from 'react-native'\nconst frets = require('./frets.json')\n\nexport default function Notes(props) {\n    const [showAnswer, setShowAnswer] = useState(false) // If the user is holding the show answer text set to true\n\n    useEffect(() => { // Adds listener for web users, also calls the initial createNote and createString\n        if (Platform.OS === 'web') {\n          document.addEventListener('keypress', (e) => {\n            if (e.code === 'Space') {\n              setShowAnswer(false)\n              props.createNote()\n              props.createString()\n            }\n          })\n        }\n        props.createNote()\n        props.createString()\n    \n        return () => {\n          if (Platform.OS === 'web') {\n            document.removeEventListener('keypress')\n          }\n        }\n    }, [])\n\n    let playThis = () => { // Calls the functions needed to change the note and string\n        setShowAnswer(false)\n        props.createNote()\n        props.createString()\n    }\n\n    return (\n        <View style={styles.container}>\n            <Text style={styles.title}>To Play</Text>\n            <Text style={{display: showAnswer ? 'flex' : 'none', color: 'white', fontSize: 30}}>Correct fret: {frets[props.string][props.note]}</Text>\n            <Pressable style={styles.toPlay} onPress={() => playThis()}>\n                <Text style={styles.noteText}>String: <Text style={{color: props.stringColor}}>{props.string}</Text></Text>\n                <Text style={styles.noteText}>Note: <Text style={{color: props.noteColor}}>{props.note}</Text></Text>\n            </Pressable>\n\n            <Text style={styles.text}>*Tap above or tap the spacebar to generate a new note to play*</Text>\n            <Pressable onPress={() => setShowAnswer(!showAnswer)}>\n                <View style={styles.button}>\n                    <Text style={styles.buttonText}>Stuck?</Text>\n                </View>\n            </Pressable>\n        </View>\n    )\n}\n\nconst styles = StyleSheet.create({\n    container: {\n        textAlign: 'center',\n        display: 'flex',\n        alignItems: 'center',\n        backgroundColor: '#292B36',\n        width: '100%',\n        padding: 50\n    },\n    noteText: {\n        fontSize: 50,\n        color: 'white',\n        paddingTop: 20\n    },\n    text: {\n        color: '#fff',\n        marginTop: 15,\n        maxWidth: '75%'\n    },\n    title: {\n        fontSize: 45,\n        fontWeight: 'bold',\n        color: 'white',\n        textDecorationLine: 'underline'\n    },\n    answer: {\n        fontSize: 12,\n        marginTop: 15,\n        color: 'white',\n        fontWeight: 'bold'\n    },\n    toPlay: {\n        display: 'flex',\n        alignItems: 'center'\n    },\n    button: {\n        display: 'flex',\n        justifyContent: 'center',\n        alignItems: 'center',\n        marginTop: 20,\n        backgroundColor: '#2196F3',\n        borderRadius: 20\n    },\n    buttonText: {\n        color: 'white',\n        padding: 10,\n        fontSize: 20\n    }\n})\n","import React, { useState, useEffect } from 'react';\nimport { View, Text, Button, StyleSheet } from 'react-native';\nimport Notes from './Frequencies.android.js';\nimport { noteFromPitch } from \"../helpers/helper.js\";\nimport autoCorrelate from \"../helpers/autoCorrelate.js\";\n\nconst audioCtx = new AudioContext();\nconst analyserNode = audioCtx.createAnalyser();\nconst buflen = 2048;\nvar buf = new Float32Array(buflen);\n\nconst noteStrings = [\n  \"C\",\n  \"C#\",\n  \"D\",\n  \"D#\",\n  \"E\",\n  \"F\",\n  \"F#\",\n  \"G\",\n  \"G#\",\n  \"A\",\n  \"A#\",\n  \"B\",\n];\n\nexport default function Frequencies(props) {\n  const [source, setSource] = useState(null);\n  const [started, setStart] = useState(false);\n  const [pitchNote, setPitchNote] = useState(\"N/A\");\n  const [pitchScale, setPitchScale] = useState(\"4\");\n  const [pitch, setPitch] = useState(\"0\");\n  const [next, setNext] = useState(false) // For knowing if next note function has been run yet or not\n\n  const updatePitch = (time) => {\n    analyserNode.getFloatTimeDomainData(buf);\n    var ac = autoCorrelate(buf, audioCtx.sampleRate);\n    if (ac > -1) {\n      let note = noteFromPitch(ac);\n      let sym = noteStrings[note % 12];\n      let scl = Math.floor(note / 12) - 1;\n      // let dtune = centsOffFromPitch(ac, note);\n      setPitch(parseFloat(ac).toFixed(2) + \" Hz\");\n      setPitchNote(sym);\n      setPitchScale(scl);\n      // setDetune(dtune);\n      // setNotification(false);\n      // console.log(note, sym, scl, dtune, ac);\n    }\n  };\n\n  useEffect(() => { // When the source changes update it in the app\n    if (source != null) {\n      source.connect(analyserNode);\n    }\n  }, [source]);\n\n  useEffect(() => { // Using the useEffect so that the state can be updated in App without causing an error\n    if (next) {\n      props.createNote()\n      props.createString()\n    }\n  }, [next]);\n\n  useEffect(() => { // Once the note is updated we need to change our \"toggle\" back otherwise we would update the note like 5 times in a second\n    if (next) {\n      setNext(false)\n    }\n  }, [props.note]);\n\n  setInterval(updatePitch, 1);\n\n  const start = async () => {\n    const input = await getMicInput();\n\n    if (audioCtx.state === \"suspended\") {\n      await audioCtx.resume();\n    }\n    setStart(true);\n    // setNotification(true);\n    // setTimeout(() => setNotification(false), 5000);\n    setSource(audioCtx.createMediaStreamSource(input));\n  };\n\n  const stop = () => {\n    source.disconnect(analyserNode);\n    setStart(false);\n  };\n  \n  const getMicInput = () => {\n    return navigator.mediaDevices.getUserMedia({\n      audio: {\n        echoCancellation: true,\n        autoGainControl: false,\n        noiseSuppression: false,\n        latency: 0,\n      },\n    });\n  };\n\n  if (pitchNote === props.note) { // Checks if the user is playing the Current Note\n    if (!next) { // If the note isn't already being changed then say it is and the UseEffect above will change it\n      setNext(true)\n    }\n  }\n\n  let content; // TODO: change buttons to pressables here\n  if (started) {\n    content = (\n      <Button title=\"Stop\" onPress={stop} />\n    )\n  } else {\n    content = (\n      <Button title=\"Start\" onPress={start} />\n    )\n  }\n\n  return (\n    <View style={styles.container}>\n      <Notes createNote={() => props.createNote()} createString={() => props.createString()} string={props.string} note={props.note} noteColor={props.noteColor} stringColor={props.stringColor}/>\n      <Text style={styles.title}>Currently Playing</Text>\n      <Text style={styles.pitchText}>{pitchNote}</Text>\n      <Text style={styles.pitchText}>{pitch}hz</Text>\n      {content}\n    </View>\n  )\n}\n\nconst styles = StyleSheet.create({\n  container: {\n    display: 'flex',\n    justifyContent: 'center',\n    alignItems: 'center',\n    backgroundColor: '#292B36',\n    width: '100%',\n    height: '100%'\n  },\n  pitchText: {\n    fontSize: 30,\n    fontWeight: 'bold',\n    marginTop: 12\n  },\n  title: {\n    fontSize: 45,\n    fontWeight: 'bold',\n    color: 'white',\n    textDecorationLine: 'underline'\n  }\n});\n","export default function autoCorrelate(buf, sampleRate) {\n    var SIZE = buf.length;\n    var rms = 0;\n  \n    for (let i = 0; i < SIZE; i++) {\n      var val = buf[i];\n      rms += val * val;\n    }\n    rms = Math.sqrt(rms / SIZE);\n    if (rms < 0.01)\n      // not enough signal\n      return -1;\n  \n    var r1 = 0,\n      r2 = SIZE - 1,\n      thres = 0.2;\n    for (let i = 0; i < SIZE / 2; i++)\n      if (Math.abs(buf[i]) < thres) {\n        r1 = i;\n        break;\n      }\n    for (let i = 1; i < SIZE / 2; i++)\n      if (Math.abs(buf[SIZE - i]) < thres) {\n        r2 = SIZE - i;\n        break;\n      }\n  \n    buf = buf.slice(r1, r2);\n    SIZE = buf.length;\n  \n    var c = new Array(SIZE).fill(0);\n    for (let i = 0; i < SIZE; i++)\n      for (var j = 0; j < SIZE - i; j++) c[i] = c[i] + buf[j] * buf[j + i];\n  \n    var d = 0;\n    while (c[d] > c[d + 1]) d++;\n    var maxval = -1,\n      maxpos = -1;\n    for (let i = d; i < SIZE; i++) {\n      if (c[i] > maxval) {\n        maxval = c[i];\n        maxpos = i;\n      }\n    }\n    var T0 = maxpos;\n  \n    var x1 = c[T0 - 1],\n      x2 = c[T0],\n      x3 = c[T0 + 1];\n    var a = (x1 + x3 - 2 * x2) / 2;\n    var b = (x3 - x1) / 2;\n    if (a) T0 = T0 - b / (2 * a);\n  \n    return sampleRate / T0;\n  };","const noteFromPitch = (frequency) => {\n    var noteNum = 12 * (Math.log(frequency / 440) / Math.log(2));\n    return Math.round(noteNum) + 69;\n  };\n  \n  const frequencyFromNoteNumber = (note) => {\n    return 440 * Math.pow(2, (note - 69) / 12);\n  };\n  \n  const centsOffFromPitch = (frequency, note) => {\n    return Math.floor(\n      (1200 * Math.log(frequency / frequencyFromNoteNumber(note))) / Math.log(2)\n    );\n  };\n  \n//   const getDetunePercent = (detune) => {\n//     if (detune > 0) {\n//       return 50 + detune;\n//     } else {\n//       return 50 + -detune;\n//     }\n//   };\n  \n  export { noteFromPitch, centsOffFromPitch };","import React, { useState } from 'react';\nimport { Button, Platform } from 'react-native';\nimport { NavigationContainer } from '@react-navigation/native';\nimport { createNativeStackNavigator } from '@react-navigation/native-stack';\n// import Notes from './components/Notes';\nimport StringsNote from './components/StringsNote';\nimport Frequencies from './components/Frequencies'\n// let Frequencies = <></>;\n// if (Platform.OS === 'web') {\n//   Frequencies = require('./components/Frequencies.js')\n// }\n// (async () => {\n//   if (Platform.OS === 'web') {\n//     let Frequencies = await import('./components/Frequencies');\n//   } else {\n//     let Frequencies = <></>\n//   }\n// })();\n\nconst Stack = createNativeStackNavigator();\n\nexport default function App() {\n  const [note, setNote] = useState(\"0\")\n  const [string, setString] = useState(\"E (6th)\")\n  const [noteColor, setNoteColor] = useState(\"#33CC33\")\n  const [stringColor, setStringColor] = useState(\"#D07173\")\n\n  let createNote = () => { // Generates a random note and its color and puts both into state\n    let tempNote = (Math.floor(Math.random() * 7)).toString()\n\n    switch (tempNote) {\n      case \"0\":\n        setNote(\"A\")\n        setNoteColor('#33CC33')\n        break;\n      case \"1\":\n        setNote(\"B\")\n        setNoteColor('#8EC9FF')\n        break;\n      case \"2\":\n        setNote(\"C\")\n        setNoteColor('#FF0000')\n        break;\n      case \"3\":\n        setNote(\"D\")\n        setNoteColor('#FFFF00')\n        break;\n      case \"4\":\n        setNote(\"E\")\n        setNoteColor('#C3F2FF')\n        break;\n      case \"5\":\n        setNote(\"F\")\n        setNoteColor('#AB0034')\n        break;\n      case \"6\":\n        setNote(\"G\")\n        setNoteColor('#FF7F00')\n        break;\n      default:\n        setNote(\"Uh oh, this should be a note... Try again\")\n    }\n  }\n\n  let createString = () => { // Generates a random string and its color and puts both into state\n    let tempString = (Math.floor(Math.random() * 6)).toString()\n\n    switch (tempString) {\n      case \"0\":\n        setString(\"E (6th)\")\n        setStringColor('#D07173')\n        break;\n      case \"1\":\n        setString(\"A (5th)\")\n        setStringColor('#F3F071')\n        break;\n      case \"2\":\n        setString(\"D (4th)\")\n        setStringColor('#1861BF')\n        break;\n      case \"3\":\n        setString(\"G (3rd)\")\n        setStringColor('#F3B54D')\n        break;\n      case \"4\":\n        setString(\"B (2nd)\")\n        setStringColor('#50C839')\n        break;\n      case \"5\":\n        setString(\"e (1st)\")\n        setStringColor('#CF27C4')\n        break;\n      default:\n        setString(\"Uh oh, this should be a string... Try again\")\n    }\n  }\n\n  let content;\n  if (Platform.OS === 'web') {\n    content = (\n      <Stack.Screen name=\"Guitario\" options={({ navigation }) => ({\n        headerRight: () => (<Button title=\"Guitario Notes >\" onPress={() => navigation.navigate('Guitario Notes')} />)\n      })}>\n        { props => <Frequencies {...props} createNote={() => createNote()} createString={() => createString()} string={string} note={note} noteColor={noteColor} stringColor={stringColor} /> }\n      </Stack.Screen>\n    )\n  } else {\n    content = (\n      <Stack.Screen name=\"Guitario\" options={({ navigation }) => ({\n        headerRight: () => (<Button title=\"Guitario Notes >\" onPress={() => navigation.navigate('Guitario Notes')} />)\n      })}>\n        { props => <Frequencies {...props} createNote={() => createNote()} createString={() => createString()} string={string} note={note} noteColor={noteColor} stringColor={stringColor} /> }\n      </Stack.Screen>\n    )\n  }\n\n  return (\n    <NavigationContainer>\n      <Stack.Navigator screenOptions={{headerStyle: {backgroundColor: '#19191B'}, headerTintColor: '#fff', headerTitleAlign: 'center', headerTitleStyle: {fontSize: 24, fontWeight: 'bold'}}}>\n        {content}\n        <Stack.Screen name=\"Guitario Notes\" options={({ navigation }) => ({\n          headerLeft: () => (<Button title=\"< Guitario\" onPress={() => navigation.navigate('Guitario')} />)\n        })}>\n          { props => <StringsNote {...props} createNote={() => createNote()} note={note} noteColor={noteColor} /> }\n        </Stack.Screen>\n      </Stack.Navigator>\n    </NavigationContainer>\n  );\n}\n"],"sourceRoot":""}